<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:b="http://bootsfaces.net/ui"
	  xmlns:o="http://omnifaces.org/ui">

<h:head>
	<ui:include src="_includes/head.xhtml" />
</h:head>
<h:body>
	<f:view>
		<ui:include src="/_includes/top.xhtml" />
		<section class="inner container-fluid">
			<div class="row">
				<div class="col-md-12">
					<div class="quotation-status">
						<h3>
							#{lex.orderNumber} : #{addToCartBean.quotation.id}
						</h3>
						<o:form id="form-1" includeViewParams="true">
							<div class="order-checkout">
								<div class="row">
									<div class="col-md-8">
										<div class="table-responsive">
											<table class="table table-hover">
												<thead>
												<tr>
													<th>#{lex.itemNameOrNum}</th>
													<th>الماركة</th>
													<th><div align="center">#{lex.quantity}</div></th>
													<th><div align="center">#{lex.unitPrice}</div></th>
													<th><div align="center">#{lex.partTotal}</div></th>
												</tr>
												</thead>
												<tbody>
												<ui:repeat var="item"
														   value="#{addToCartBean.quotation.quotationItems}">
													<tr>
														<td>#{item.name}</td>
														<td>#{item.products.brand.nameAr}</td>
														<td>
															<div align="center">
																<b:selectOneMenu styleClass="" value="#{item.quantity}"
																				 process="@this"
																				 update="@form">
																	<f:selectItem itemValue="#{0}" itemLabel="0" />
																	<f:selectItems value="#{item.quantityArray}" var="quant"
																				   itemValue="#{quant}" itemLabel="#{quant}"/>
																</b:selectOneMenu>
															</div>

														</td>
														<td>
															<div align="center">
																<h:outputText value="#{item.products.salesPrice}" id="unit-price">
																	<f:convertNumber currencySymbol="" locale="en_US"   type="currency" />
																</h:outputText>
															</div>
														</td>
														<td>
															<div align="center">
																<h:outputText id="total-price"
																			  value="#{item.quantity * item.products.salesPrice}">
																	<f:convertNumber currencySymbol="" type="currency" locale="en_US"  />
																</h:outputText>
															</div>
														</td>
													</tr>
												</ui:repeat>
												</tbody>
											</table>
										</div>
									</div>
									<div class="col-md-4">
										<h:panelGroup id="footer-price">
											<div class="quotation-summary">
												<ul class="list-unstyled">
													<li>
														<label>#{lex.totalParts}</label>
														<p>
															<h:outputText value="#{addToCartBean.quotation.totalProducts}" >
																<f:convertNumber type="currency" currencySymbol="SR " locale="en_US"  />
															</h:outputText>
														</p>
													</li>
													<li>
														<label>#{lex.deliveryFees}</label>
														<p>
															<h:outputText value="#{addToCartBean.quotation.deliveryFees}" id="del-fees">
																<f:convertNumber type="currency" currencySymbol="SR " locale="en_US"  />
															</h:outputText>
														</p>
													</li>
													<li>
														<label>#{lex.vat}</label>
														<p>
															<h:outputText
																	value="#{addToCartBean.quotation.totalVat}" id="vat">
																<f:convertNumber type="currency" currencySymbol="SR " locale="en_US"  />
															</h:outputText>
														</p>
													</li>
													<li>
														<label>#{lex.total}</label>
														<p>
															<h:outputText  id="total-price" value="#{addToCartBean.quotation.grandTotal}">
																<f:convertNumber type="currency" currencySymbol="SR " locale="en_US"  />
															</h:outputText>
														</p>
													</li>
												</ul>
												<b:commandButton value="#{lex.buyNow}" look="primary" rendered="true"
																 actionListener="#{addToCartBean.checkout}" update="@form" process="@form">
													<f:param name="order" value="#{addToCartBean.quotation.id}"/>
												</b:commandButton>
											</div>
										</h:panelGroup>
									</div>
								</div>
							</div>
							<b:messages />
						</o:form>
					</div>
				</div>
			</div>
		</section>



		<footer>
			<ui:include src="/_includes/footer.xhtml" />
		</footer>
	</f:view>
</h:body>
</html>