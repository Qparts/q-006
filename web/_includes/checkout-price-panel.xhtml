<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:b="http://bootsfaces.net/ui">
    <div class="quotation-summary">
        <ul class="list-unstyled">
            <li>
                <label>
                    #{lex.totalParts}
                </label>
                <p>
                    <h:outputText value="#{cartBean.cartRequest.totalProducts}">
                        <f:convertNumber type="currency" currencySymbol="SR " locale="en_US"/>
                    </h:outputText>
                </p>
            </li>
            <li>
                <label>
                    #{lex.deliveryFees}
                </label>
                <p>
                    <h:outputText value="#{cartBean.cartRequest.deliveryCharges}">
                        <f:convertNumber type="currency" currencySymbol="SR "
                                         locale="en_US"/>
                    </h:outputText>
                </p>
            </li>
            <li>
                <label>
                    الإجمالي قبل الخصم و الضريبة
                </label>
                <p>
                    <h:outputText id="total-price"
                                  value="#{cartBean.cartRequest.subTotal}">
                        <f:convertNumber type="currency" currencySymbol="SR "
                                         locale="en_US"/>
                    </h:outputText>
                </p>
            </li>
            <li>
                <label>
                    الخصم
                </label>
                <p>
                    <h:outputText value="#{cartBean.cartRequest.totalDiscount}">
                        <f:convertNumber currencySymbol="SR " type="currency" locale="en_US"/>
                    </h:outputText>
                </p>
            </li>
            <li>
                <label>
                    مجموع الضريبة
                </label>
                <p>
                    <h:outputText id="total-vat" value="#{cartBean.cartRequest.totalVatAfterDiscount}" >
                        <f:convertNumber type="currency" currencySymbol="SR " locale="en_US"/>
                    </h:outputText>
                </p>
            </li>
            <li>
                <label>
                    الإجمالي
                </label>
                <p>
                    <h:outputText  id="total-price-promo" value="#{cartBean.cartRequest.grandTotalAfterDiscount}">
                        <f:convertNumber type="currency" currencySymbol="SR" locale="en_US"/>
                    </h:outputText>

                </p>
            </li>
            <li class="promo">
                    <h:panelGroup id="promo-question" layout="block">
                        <h:panelGroup rendered="#{not cartBean.promoVerified}">
                            <h:selectBooleanCheckbox value="#{cartBean.havePromo}">
                                <f:ajax execute="@this" render="promo-panel"/>
                            </h:selectBooleanCheckbox>
                            <p>#{lex.promCodeQuestion}</p>
                        </h:panelGroup>
                    </h:panelGroup>
                    <h:panelGroup id="promo-panel" layout="block" styleClass="promo-panel">
                        <h:panelGroup rendered="#{cartBean.havePromo and not cartBean.promoVerified}">
                            <div class="form-group">
                                <label>#{lex.promCodeEnter}</label>
                                <h:inputText id="in" value="#{cartBean.promoCodeQuery}"
                                             styleClass="form-control"
                                             disabled="#{cartBean.promoVerified}"/>
                            </div>
                            <h:commandLink
                                    actionListener="#{cartBean.verifyPromoCode()}"
                                    value="#{lex.promCodeVerify}"
                                    rendered="#{not cartBean.promoVerified}">
                                <f:ajax execute="in @this" render="price-panel products-table-panel msgs"/>
                            </h:commandLink>
                            <br/>
                        </h:panelGroup>
                    </h:panelGroup>
            </li>
        </ul>
        <b:commandButton actionListener="#{cartBean.checkout()}" look="primary" value="#{lex.checkout}" update=":steps-panel @form"/>
    </div>

</ui:composition>